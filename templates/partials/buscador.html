<!-- Barra de busqueda con switch y filtros -->
<div class="d-flex align-items-center justify-content-between mb-4">
  <!-- Boton opciones avanzadas -->
  <button
    class="btn btn-success me-3"
    type="button"
    data-bs-toggle="collapse"
    data-bs-target="#filtrosAvanzados"
    aria-expanded="false"
    aria-controls="filtrosAvanzados"
  >
    Opciones avanzadas
  </button>

  <!-- Boton limpiar filtros -->
  <button
    id="clearFilters"
    class="btn btn-outline-success me-3"
    type="button"
  >
    Borrar filtros
  </button>

  <!-- Barra de busqueda -->
  <form
    id="searchForm"
    class="flex-grow-1 d-flex mx-3"
    action="/buscar"
    method="GET"
  >
    <input
      id="searchInput"
      class="form-control me-2"
      type="search"
      name="q"
      value="{{ search.query }}"
      placeholder="Buscar..."
    />
    <button class="btn btn-outline-success" type="submit">Buscar</button>
  </form>

  <!-- Switch Paciente / Tutor / Consulta -->
  <div class="btn-group" role="group" aria-label="Modo búsqueda">
    <input
      type="radio"
      class="btn-check"
      name="modo"
      id="modoPaciente"
      value="paciente"
      autocomplete="off"
      {% if search.modo == "paciente" %}checked{% endif %}
    />
    <label class="btn btn-outline-success" for="modoPaciente">Paciente</label>

    <input 
      type="radio"
      class="btn-check"
      name="modo"
      id="modoConsulta"
      value="consulta"
      autocomplete="off"
      {% if search.modo == "consulta" %}checked{% endif %}
    />
    <label class="btn btn-outline-success" for="modoConsulta">Consulta</label>

    <input
      type="radio"
      class="btn-check"
      name="modo"
      id="modoTutor"
      value="tutor"
      autocomplete="off"
      {% if search.modo == "tutor" %}checked{% endif %}
    />
    <label class="btn btn-outline-success" for="modoTutor">Tutor</label>
    
  </div>
</div>

<!-- Filtros avanzados -->
<div class="collapse mb-3 {% if search.advanced %}show{% endif %}" id="filtrosAvanzados">
  <div class="card card-body">
    <!-- Filtros Paciente -->
    <div id="filtrosPaciente">
      <div class="mb-2">
        <label class="form-label">Especie</label>
        <input
          type="text"
          class="form-control"
          name="especie"
          value="{{ search.especie }}"
        />
      </div>
      <div class="mb-2">
        <label class="form-label">Raza</label>
        <input
          type="text"
          class="form-control"
          name="raza"
          value="{{ search.raza }}"
        />
      </div>
      <div class="mb-2">
        <label class="form-label">Color</label>
        <input
          type="text"
          class="form-control"
          name="color"
          value="{{ search.color }}"
        />
      </div>
      <div class="form-check">
        <input
          class="form-check-input"
          type="checkbox"
          name="reproductor"
          value="1"
          {% if search.reproductor %}checked{% endif %}
        />
        <label class="form-check-label">Reproductor</label>
      </div>
      <div class="form-check">
        <input
          class="form-check-input"
          type="checkbox"
          name="castrado"
          value="1"
          {% if search.castrado %}checked{% endif %}
        />
        <label class="form-check-label">Castrado</label>
      </div>
    </div>

    <!-- Filtros Consulta -->
    <div id="filtrosConsulta" style="display: none">
      <div class="mb-2">
        <label class="form-label">Anamnesis</label>
        <input 
          type="text" 
          class="form-control" 
          name="anamnesis" 
          value="{{ search.anamnesis }}"/>
      </div>
      <div class="mb-2">
        <label class="form-label">Diagnóstico</label>
        <input 
          type="text" 
          class="form-control" 
          name="diagnostico" 
          value="{{ search.diagnostico }}"/>
      </div>
      <div class="mb-2">
        <label class="form-label">Tratamiento</label>
        <input 
          type="text" 
          class="form-control" 
          name="tratamiento" 
          value="{{ search.tratamiento }}"/>
      </div>
    </div>

    <!-- Filtros Tutor -->
    <div id="filtrosTutor" style="display: none">
      <div class="mb-2">
        <label class="form-label">Teléfono</label>
        <input
          type="number"
          class="form-control"
          name="telefono"
          value="{{ search.telefono }}"
        />
      </div>
      <div class="mb-2">
        <label class="form-label">Dirección</label>
        <input
          type="text"
          class="form-control"
          name="direccion"
          value="{{ search.direccion }}"
        />
      </div>
      <div class="mb-2">
        <label class="form-label">Email</label>
        <input
          type="text"
          class="form-control"
          name="email"
          value="{{ search.email }}"
        />
      </div>
    </div>
    
  </div>
</div>
